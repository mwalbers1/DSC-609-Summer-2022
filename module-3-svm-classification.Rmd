---
title: "Classification Machine Learning Models"
author: "Michael Albers"
date: '2022-07-21'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Libraries

```{r echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse)
```

```{r echo=FALSE, warning=FALSE, message=FALSE}
library(janitor)
library(skimr)
```

```{r echo=FALSE, warning=FALSE, message=FALSE}
library(lubridate)

```




## Overview

- Run a kernelized SVM model on a bike sharing data set
- Implement two other classification models on same data set
- Compare and contrast results of each classification model


## Data Set

Lyft Bikes and Scooters, LLC (“Bikeshare”) operates the City of Chicago’s (“City”) Divvy bicycle sharing service (https://divvybikes.com). Bikeshare and the City are committed to supporting bicycling as an alternative transportation option. As part of that commitment, the City permits Bikeshare to make certain Divvy system data owned by the City (“Data”) available to the public. 

License Agreement: https://ride.divvybikes.com/data-license-agreement

Download link: https://divvy-tripdata.s3.amazonaws.com/index.html


## Read and Inspect data set

The bike sharing data file for the month of May in 2021 will be the data source.  The dependent variable for the classification models is the member_casual column.  The classification models will try and predict whether a bike customer is member or a casual bike rider.


```{r read in divvy data (dd)}
dd <- read.csv('data/202105-divvy-tripdata.csv')
```

```{r}
glimpse(dd)
```

```{r}
dd$started_at <- ymd_hms(dd$started_at)
```

```{r}
dd$ended_at <- ymd_hms(dd$ended_at)
```


```{r}
dd$member_casual <- as.factor(dd$member_casual)
```


```{r}
glimpse(dd)
```



```{r}
summary(dd)
```

```{r}
dd %>% 
  tabyl(rideable_type, member_casual) %>% 
  adorn_totals("col")
```

The label column is member_casual which has two possible values (member or casual).  The number of casual and member riders is about the same.


## Pre processing of data set

### One-hot encode the rideable_type column


### Create new features

  1. Week day number: Day of week that the person took a bike trip
  2. Start hour: The hour of the day that the person started on bike trip
  3. End hour: The hour of the day that the person ended his/her bike trip
  4. Trip duration: Duration of bike trip in minutes, calculated as ended_at minus started_at
  


```{r Day of week number}
dd$weekday_num <- wday(dd$started_at)
```


```{r}
glimpse(dd)
```

```{r Start Hour of Bike trip}

```

```{r End Hour of Bike trip}

```


```{r Bike trip duration}
dd$trip_duration <- as.numeric(difftime(dd$ended_at, dd$started_at, units = "mins"))
```

```{r}
glimpse(dd)
```

